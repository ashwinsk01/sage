<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>An Ode to Sage Green</title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
        <link
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
            rel="stylesheet"
        />
        <link rel="stylesheet" href="styles.css" />
    </head>
    <body>
        <div class="leaf-pattern"></div>
        <div class="container">
            <div class="header">
                <div class="header-content">
                    <h1>An Ode to Sage Green</h1>
                    <p class="subtitle">
                        This one is a lil different, but I hope you like it.
                        Gotta level up, right?
                    </p>

                    <div class="main-countdown">
                        <div class="main-countdown-title">
                            An inconspicuous timer.
                        </div>
                        <div class="main-countdown-time" id="mainCountdown">
                            Loading...
                        </div>
                    </div>

                    <div
                        class="playlist-container"
                        style="margin-left: 0; text-align: left"
                    >
                        <h3 class="playlist-title">For the vibes</h3>
                        <div class="spotify-embed">
                            <iframe
                                style="border-radius: 12px"
                                src="https://open.spotify.com/embed/playlist/29wAdQgiDDimZnkwwlEPwZ?utm_source=generator"
                                width="100%"
                                height="352"
                                frameborder="0"
                                allowfullscreen=""
                                allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
                                loading="lazy"
                            ></iframe>
                        </div>
                    </div>
                </div>

                <div class="credits">
                    Built for A.T
                    <div class="flower-animation">
                        <div class="flower"></div>
                        <div
                            class="flower"
                            style="left: 20%; animation-delay: 2s"
                        ></div>
                        <div
                            class="flower"
                            style="left: 40%; animation-delay: 4s"
                        ></div>
                        <div
                            class="flower"
                            style="left: 60%; animation-delay: 1s"
                        ></div>
                        <div
                            class="flower"
                            style="left: 80%; animation-delay: 3s"
                        ></div>
                    </div>
                </div>
            </div>

            <div class="cards-container">
                <div class="location-card" id="location1">
                    <div class="card-content">
                        <div class="icon-circle">
                            <i class="fas fa-hiking"></i>
                        </div>
                        <h2>Small walks, small talks, Big coffees</h2>
                        <div class="time">
                            <i class="far fa-clock"></i>
                            14:00
                        </div>
                        <div class="location-content">
                            Your pick for sure, I guess that I'm taking L's in
                            that department anyways, so I'mma just go with it.
                            All I can promise is loads of trash humor :).
                        </div>
                    </div>
                </div>

                <div class="location-card" id="location2">
                    <div class="card-content">
                        <div class="icon-circle">
                            <i class="fas fa-train"></i>
                        </div>
                        <h2 class="placeholder-title">
                            Someplace to Someplace
                        </h2>
                        <h2 class="real-title" style="display: none">
                            We're going to Oxfordshire!
                        </h2>
                        <div class="time">
                            <i class="far fa-clock"></i>
                            15:00
                        </div>
                        <div class="countdown" id="countdown2">
                            <i class="fas fa-hourglass-half"></i>
                            Loading countdown...
                        </div>
                        <div class="location-content placeholder-content">
                            A journey from one place to another, no clues found
                            :/
                        </div>
                        <div
                            class="location-content real-content"
                            style="display: none"
                        >
                            Wanted to switch it up, we always in the city, so
                            lets get out of it for a bit. Everything is sorted,
                            so dw, today is about you and enjoying yourself to
                            the fullest.
                        </div>
                        <div class="locked-message">
                            <i class="fas fa-lock"></i>
                            This location will unlock at the scheduled time.
                        </div>
                    </div>
                </div>

                <div class="location-card" id="location3">
                    <div class="card-content">
                        <div class="icon-circle">
                            <i class="fas fa-utensils"></i>
                        </div>
                        <h2 class="placeholder-title">Consumption of Things</h2>
                        <h2 class="real-title" style="display: none">
                            The Killingworth Castle
                        </h2>
                        <div class="time">
                            <i class="far fa-clock"></i>
                            17:30
                        </div>
                        <div class="countdown" id="countdown3">
                            <i class="fas fa-hourglass-half"></i>
                            Loading countdown...
                        </div>
                        <div class="location-content placeholder-content">
                            We will.. well consume things?
                        </div>
                        <div
                            class="location-content real-content"
                            style="display: none"
                        >
                            Gonna take a lil ride to the countryside, gonna have
                            some mad food and chill like there is no tomorow.
                        </div>
                        <div class="locked-message">
                            <i class="fas fa-lock"></i>
                            This location will unlock at the scheduled time.
                        </div>
                    </div>
                </div>

                <div class="location-card" id="location4">
                    <div class="card-content">
                        <div class="icon-circle">
                            <i class="fas fa-train"></i>
                        </div>
                        <h2 class="placeholder-title">Back from Someplace</h2>
                        <h2 class="real-title" style="display: none">
                            Going back to London
                        </h2>
                        <div class="time">
                            <i class="far fa-clock"></i>
                            20:00
                        </div>
                        <div class="countdown" id="countdown4">
                            <i class="fas fa-hourglass-half"></i>
                            Loading countdown...
                        </div>
                        <div class="location-content placeholder-content">
                            We go back to the usual place.
                        </div>
                        <div
                            class="location-content real-content"
                            style="display: none"
                        >
                            Making our way back, It's been quite a day and I've
                            (hopefully) surprised you at least a bit. You were
                            worth the hassle. I promise.
                        </div>
                        <div class="locked-message">
                            <i class="fas fa-lock"></i>
                            This location will unlock at the scheduled time.
                        </div>
                    </div>
                </div>

                <div class="location-card" id="location5">
                    <div class="card-content">
                        <div class="icon-circle">
                            <i class="fas fa-home"></i>
                        </div>
                        <h2>Back Home</h2>
                        <div class="time">
                            <i class="far fa-clock"></i>
                            21:00
                        </div>
                        <div class="location-content">
                            Back to the town, back to the usual. A trip
                            hopefully well done.
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script>
            // Main Countdown Timer
            // Main Countdown Timer
            function updateMainCountdown() {
                const mainTarget = moment("2025-02-22 14:00:00");
                const mainCountdownElement =
                    document.getElementById("mainCountdown");

                function updateMain() {
                    const now = moment();
                    const duration = moment.duration(mainTarget.diff(now));

                    if (duration.asMilliseconds() <= 0) {
                        mainCountdownElement.innerHTML = `Our journey begins!`;
                        return;
                    }

                    const days = Math.floor(duration.asDays());
                    const hours = duration.hours();
                    const minutes = duration.minutes();
                    const seconds = duration.seconds();

                    mainCountdownElement.innerHTML = `
                        <span>${days}<span class="main-countdown-unit">days</span></span>
                        <span>${hours}<span class="main-countdown-unit">hours</span></span>
                        <span>${minutes}<span class="main-countdown-unit">mins</span></span>
                        <span>${seconds}<span class="main-countdown-unit">secs</span></span>
                    `;
                }

                updateMain();
                setInterval(updateMain, 1000);
            }

            // Location Countdowns
            function updateCountdowns() {
                const targetDates = {
                    2: moment("2025-02-22 15:00:00"),
                    3: moment("2025-02-22 17:30:00"),
                    4: moment("2025-02-22 20:00:00"),
                };

                const locations = [2, 3, 4];
                locations.forEach((locationNum) => {
                    const countdown = document.getElementById(
                        `countdown${locationNum}`,
                    );
                    const card = document.getElementById(
                        `location${locationNum}`,
                    );
                    const placeholderTitle =
                        card.querySelector(".placeholder-title");
                    const realTitle = card.querySelector(".real-title");
                    const placeholderContent = card.querySelector(
                        ".placeholder-content",
                    );
                    const realContent = card.querySelector(".real-content");
                    const lockedMessage = card.querySelector(".locked-message");

                    function showUnlockedContent() {
                        // Hide placeholder and locked content
                        placeholderTitle.style.display = "none";
                        placeholderContent.style.display = "none";
                        lockedMessage.style.display = "none";

                        // Show real content with proper visibility and opacity
                        realTitle.style.display = "block";
                        realTitle.style.opacity = "1";
                        realTitle.style.visibility = "visible";

                        realContent.style.display = "block";
                        realContent.style.opacity = "1";
                        realContent.style.visibility = "visible";

                        countdown.innerHTML = `<i class="fas fa-check"></i> Unlocked!`;
                    }

                    // Check initial state
                    const initialDuration = moment.duration(
                        targetDates[locationNum].diff(moment()),
                    );
                    if (initialDuration.asMilliseconds() <= 0) {
                        showUnlockedContent();
                    } else {
                        function update() {
                            const now = moment();
                            const duration = moment.duration(
                                targetDates[locationNum].diff(now),
                            );

                            if (duration.asMilliseconds() <= 0) {
                                showUnlockedContent();
                                return;
                            }

                            const days = Math.floor(duration.asDays());
                            const hours = duration.hours();
                            const minutes = duration.minutes();
                            const seconds = duration.seconds();
                            countdown.innerHTML = `
                                <i class="fas fa-hourglass-half"></i>
                                ${days}d ${hours}h ${minutes}m ${seconds}s
                            `;
                        }

                        update();
                        setInterval(update, 1000);
                    }
                });
            }

            // Initialize both countdowns immediately
            updateMainCountdown();
            updateCountdowns();

            // Function to add Spotify playlist
            function addSpotifyPlaylist(playlistUrl) {
                if (!playlistUrl) return;

                const playlistId = playlistUrl.split("/").pop();
                const embedUrl = `https://open.spotify.com/embed/playlist/${playlistId}`;

                const spotifyEmbed = document.querySelector(".spotify-embed");
                spotifyEmbed.innerHTML = `
                    <iframe src="${embedUrl}"
                        width="100%"
                        height="380"
                        frameborder="0"
                        allowtransparency="true"
                        allow="encrypted-media">
                    </iframe>
                `;
            }
        </script>
    </body>
</html>
